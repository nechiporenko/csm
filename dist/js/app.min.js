/*!
 * csm
 * @author: nechiporenko
 * @version: 0.0.1
 * Copyright 2019.
 */

window.onload=function(){"use strict";!function(){var a,b=document.getElementsByClassName("js-header")[0],c=b.getElementsByClassName("js-header-top")[0],d=b.getElementsByClassName("js-header-main")[0],e=document.getElementsByClassName("js-scroll_btn")[0],f=!1,g=null,h=null,i=!1,j={init:function(){g=j.checkHtopHeight(),h=g,j.wrapTarget(),j.checkHeaderPosition(),window.addEventListener("scroll",j.checkHeaderPosition),window.addEventListener("resize",j.startResize)},checkHtopHeight:function(){return c.offsetHeight},wrapTarget:function(){var a=document.createElement("div");a.classList.add("js-wrap"),d.parentNode.insertBefore(a,d),a.appendChild(d)},checkHeaderPosition:function(){var a=c.getBoundingClientRect().top+document.body.scrollTop;a+g<=0&&!f&&j.makeHeaderStick(),a+g>0&&f&&j.makeHeaderUnstick()},makeHeaderStick:function(){console.log("stick"),f=!0,b.classList.add("sticky"),e.classList.add("active"),e.addEventListener("click",j.scrollToTop)},makeHeaderUnstick:function(){console.log("unstick"),f=!1,b.classList.remove("sticky"),e.classList.remove("active"),e.removeEventListener("click",j.scrollToTop)},startResize:function(){a=new Date,!1===i&&(i=!0,setTimeout(j.endResize,200))},endResize:function(){if(new Date-a<200)setTimeout(j.endResize,200);else{i=!1;var b=j.checkHtopHeight();b!==h&&(g=b,h=b,j.checkHeaderPosition())}},scrollToTop:function(){function a(a,b,c){if(c>0){var d=c-c*a/(2*b);window.scrollTo(0,d)}}var b=Date.now(),c=setInterval(function(){var d=Date.now()-b,e=window.pageYOffset||document.documentElement.scrollTop;if(d>=2e3||e<=0)return void clearInterval(c);a(d,2e3,e)},10)}};j.init()}(),function(){var a=document.getElementsByClassName("js-menu")[0],b=document.getElementsByClassName("js-menuopen-btn")[0],c=document.getElementsByClassName("js-menuclose-btn")[0],d=null,e={init:function(){var a=document.getElementsByClassName("js-header")[0];d=document.createElement("div",{id:"m_ovrl"}),d.classList.add("js-overlay"),a.insertBefore(d,a.firstChild),b.addEventListener("click",e.openMenu)},openMenu:function(){a.classList.add("active"),d.classList.add("active"),c.addEventListener("click",e.closeMenu),d.addEventListener("click",e.closeMenu)},closeMenu:function(){a.classList.remove("active"),d.classList.remove("active"),c.removeEventListener("click",e.closeMenu),d.removeEventListener("click",e.closeMenu)}};e.init()}()};